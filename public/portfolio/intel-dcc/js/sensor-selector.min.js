!function(){"use strict";IntelDCC.api={},IntelDCC.api.groups=[],IntelDCC.sensorSelector={},$(document).ready(function(){IntelDCC.sensorSelector.eventListeners(),IntelDCC.sensorSelector.downloadData()}),IntelDCC.sensorSelector.eventListeners=function(){$("#sensor-selector-groups").on("change",function(){IntelDCC.sensorSelector.groupChanged()}),$("#sensor-selector-devices").on("change",function(){IntelDCC.sensorSelector.deviceChanged()})},IntelDCC.sensorSelector.downloadData=function(){$("#intel-api-loading-icon").show(),$.post("api/get-groups.php",function(e){IntelDCC.api.groups=e,IntelDCC.sensorSelector.populateGroupDropdown(),IntelDCC.sensorSelector.populateDeviceDropdown(),IntelDCC.sensorSelector.populateSensorDropdown(),$("#intel-api-loading-icon").hide()})},IntelDCC.sensorSelector.populateGroupDropdown=function(){var e=document.getElementById("sensor-selector-groups");IntelDCC.resetDropdown(e,!0),IntelDCC.api.groups.forEach(function(o,n){var t=document.createElement("option");t.text=o.data.groupName,t.value=o.data.groupId,e.appendChild(t)}),$(e).val("")},IntelDCC.sensorSelector.populateDeviceDropdown=function(){var e=document.getElementById("sensor-selector-devices");IntelDCC.resetDropdown(e,!0);var o=IntelDCC.sensorSelector.getSelectedGroup();o&&o.devices.forEach(function(o,n){var t=document.createElement("option");t.text=o.data.displayName,t.value=o.data.deviceId,e.appendChild(t)}),$(e).val("")},IntelDCC.sensorSelector.populateSensorDropdown=function(){var e=document.getElementById("sensor-selector-sensors");IntelDCC.resetDropdown(e,!0);var o=IntelDCC.sensorSelector.getSelectedDevice();if(o){var n=o.data.sensorList.split(", ");n.forEach(function(o,n){var t=document.createElement("option");t.text=o,t.value=o,e.appendChild(t)})}$(e).val("")},IntelDCC.sensorSelector.getSelectedGroup=function(){var e=null,o=document.getElementById("sensor-selector-groups");if(o.selectedIndex>=0){var n=o.options[o.selectedIndex].value;IntelDCC.api.groups.forEach(function(o,t){n===o.data.groupId&&(e=o)})}return e},IntelDCC.sensorSelector.getSelectedDevice=function(){var e=null,o=document.getElementById("sensor-selector-devices"),n=IntelDCC.sensorSelector.getSelectedGroup();if(n&&o.selectedIndex>=0){var t=o.options[o.selectedIndex].value;n.devices.forEach(function(o,n){t===o.data.deviceId&&(e=o)})}return e},IntelDCC.sensorSelector.groupChanged=function(){$("#sensor-selector-groups").val();IntelDCC.resetDropdown("#sensor-selector-devices",!0),IntelDCC.resetDropdown("#sensor-selector-sensors",!0),IntelDCC.sensorSelector.populateDeviceDropdown(),IntelDCC.sensorSelector.autoSelectCheck("#sensor-selector-devices")},IntelDCC.sensorSelector.deviceChanged=function(){$("#sensor-selector-groups").val(),$("#sensor-selector-devices").val();IntelDCC.resetDropdown("#sensor-selector-sensors",!0),IntelDCC.sensorSelector.populateSensorDropdown(),IntelDCC.sensorSelector.autoSelectCheck("#sensor-selector-sensors")},IntelDCC.sensorSelector.autoSelectCheck=function(e){var o=$(e).find("option");1===o.length&&(o.prop("selected",!0),$(e).trigger("change"))}}();