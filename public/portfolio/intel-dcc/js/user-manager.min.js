!function(){"use strict";IntelDCC.api={},IntelDCC.api.user=null,IntelDCC.userManager={userID:null},$(document).ready(function(){IntelDCC.userManager.userID=IntelDCC.getParameterByName("user-id"),IntelDCC.userManager.eventListeners(),IntelDCC.userManager.userID&&IntelDCC.userManager.downloadData()}),IntelDCC.userManager.eventListeners=function(){$("#save-user-button").on("click",function(){IntelDCC.userManager.saveUser()})},IntelDCC.userManager.downloadData=function(){$("#intel-api-loading-icon").show();var e=new Promise(function(e,a){$.post("api/get-users.php",function(a){var r=a.filter(function(e){return e.userId==IntelDCC.userManager.userID});1===r.length?(IntelDCC.api.user=r[0],e(IntelDCC.api.user)):(IntelDCC.userManager.userID=null,$("#intel-api-loading-icon").hide(),$("#main-section-heading").text("New User"))})});e.then(function(e){$("#user-username").val(e.userName),$("#user-firstname").val(e.firstName),$("#user-lastname").val(e.lastName),$("#user-email").val(e.email),$("#user-mobile").val(e.mobile),$("#user-role").val(e.role),$("#user-comm-prefs").val(e.commPrefs),$("#intel-api-loading-icon").hide()})},IntelDCC.userManager.saveUser=function(){var e=$("#user-username").val().trim(),a=$("#user-firstname").val().trim(),r=$("#user-lastname").val().trim(),n=$("#user-email").val().trim(),s=$("#user-password").val().trim(),t=$("#user-mobile").val().trim(),i=$("#user-role").val(),l=$("#user-comm-prefs").val();if(e&&a&&r&&n&&i){$("#intel-api-loading-icon").show();var u=$("#save-user-button");u.attr("disabled","disabled"),$.post("api/set-user.php",{userID:IntelDCC.userManager.userID,username:e,firstname:a,lastname:r,email:n,password:s,mobile:t,role:i,commPrefs:l},function(e){IntelDCC.scrollTo(0),$("#intel-api-loading-icon").hide();var a=$("#page-notification");a.addClass("page-notification--show"),setTimeout(function(){u.removeAttr("disabled"),a.removeClass("page-notification--show")},4e3)})}else $("#user-settings").animateCSS("form-error")}}();