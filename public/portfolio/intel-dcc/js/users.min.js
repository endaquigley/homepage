!function(){"use strict";IntelDCC.api={},IntelDCC.api.users=[],IntelDCC.users={},$(document).ready(function(){IntelDCC.users.eventListeners(),IntelDCC.users.downloadData()}),IntelDCC.users.eventListeners=function(){$("#user-list").on("click","[data-delete-user-button]",function(){IntelDCC.users.deleteUser(this)})},IntelDCC.users.downloadData=function(){$("#intel-api-loading-icon").show(),$.post("api/get-users.php",function(e){IntelDCC.api.users=e,IntelDCC.users.populateUserList(),$("#intel-api-loading-icon").hide()})},IntelDCC.users.populateUserList=function(){var e=$("#user-list");IntelDCC.api.users.forEach(function(t){e.append('<div class="standard-table__row" data-user-id="'+t.userId+'"><div class="standard-table__cell"><p class="capitalise"><label class="fancy-checkbox"><input class="fancy-checkbox__input" type="checkbox"><span class="fancy-checkbox__icon fancy-checkbox__icon--extra-margin"></span><span class="fancy-checkbox__text">'+t.firstName+" "+t.lastName+'</span></label></p></div><div class="standard-table__cell"><p>'+t.role+'</p></div><div class="standard-table__cell"><p>'+t.mobile+'</p></div><div class="standard-table__cell"><p class="lowercase">'+t.email+'</p></div><div class="standard-table__cell"><p>'+t.commPrefs+'</p></div><div class="standard-table__cell standard-table__cell--no-wrap"><p><a class="icon-button icon-button--edit" href="edit-user.php?user-id='+t.userId+'"></a><button class="icon-button icon-button--delete icon-button--no-margin" data-delete-user-button></button></p></div></div>')})},IntelDCC.users.deleteUser=function(e){var t=$(e).closest("[data-user-id]"),s=$(t).attr("data-user-id");confirm("Are you sure you want to delete this user?")&&($("#intel-api-loading-icon").show(),$(e).attr("disabled","disabled"),$.post("api/delete-user.php",{userID:s},function(e){t.remove(),IntelDCC.scrollTo(0),$("#intel-api-loading-icon").hide();var s=$("#page-notification");s.addClass("page-notification--show"),setTimeout(function(){s.removeClass("page-notification--show")},4e3)}))}}();